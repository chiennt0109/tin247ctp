{% extends "base.html" %}
{% block content %}
<h3>📝 Submission #{{ sub.id }}</h3>

<p><b>Problem:</b> {{ sub.problem.code }}</p>
<p><b>Status:</b> {{ sub.verdict }}</p>
<p><b>Exec time:</b> {{ sub.exec_time }}s</p>
<p><b>Passed:</b> {{ sub.passed_tests }}/{{ sub.total_tests }}</p>

<h4>💻 Code</h4>
<pre>{{ sub.source_code }}</pre>

<a href="/submissions/my/" class="btn btn-secondary">⬅ Back</a>
{% endblock %}
{% if logs and logs|length %}
<hr>
<h5 class="mt-3">🔎 Debug từng test</h5>
<div class="table-responsive">
  <table class="table table-sm table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>Trạng thái</th>
        <th>Thời gian (s)</th>
        <th>Input</th>
        <th>Expected</th>
        <th>Output</th>
        <th>Stderr</th>
      </tr>
    </thead>
    <tbody>
      {% for t in logs %}
      <tr class="{% if t.status != 'AC' %}table-warning{% endif %}">
        <td>{{ t.no }}</td>
        <td><code>{{ t.status }}</code></td>
        <td style="white-space:nowrap">{{ t.elapsed|floatformat:6 }}</td>
        <td><pre class="mb-0" style="max-height:160px;overflow:auto">{{ t.input }}</pre></td>
        <td><pre class="mb-0" style="max-height:160px;overflow:auto">{{ t.expected }}</pre></td>
        <td><pre class="mb-0" style="max-height:160px;overflow:auto">{{ t.output }}</pre></td>
        <td><pre class="mb-0" style="max-height:160px;overflow:auto">{{ t.stderr }}</pre></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}
