{% comment %}
ğŸ“ path: templates/submissions/result.html
Hiá»ƒn thá»‹ káº¿t quáº£ cháº¥m bÃ i vÃ  lá»‹ch sá»­ ná»™p bÃ i.
{% endcomment %}
{% extends "base.html" %}
{% load static %}

{% block title %}Káº¿t quáº£ ná»™p bÃ i - {{ problem.title }}{% endblock %}

{% block content %}
<div class="container mt-4">

  <!-- ğŸ§© ThÃ´ng tin bÃ i toÃ¡n -->
  <div class="mb-4">
    <h2>ğŸ§  {{ problem.code }} â€“ {{ problem.title }}</h2>
    <hr>
  </div>

  <!-- ğŸ§¾ Káº¿t quáº£ má»›i nháº¥t -->
  <div class="card p-4 shadow-sm mb-4">
    <h4 class="mb-3">ğŸ“Š Káº¿t quáº£ cháº¥m bÃ i</h4>

    {% if result %}
      {% if result.verdict == "Accepted" %}
        <h4><span class="badge bg-success">âœ… Accepted</span></h4>
      {% elif "Wrong" in result.verdict %}
        <h4><span class="badge bg-danger">âŒ {{ result.verdict }}</span></h4>
      {% elif "Time" in result.verdict %}
        <h4><span class="badge bg-warning text-dark">â° {{ result.verdict }}</span></h4>
      {% elif "Memory" in result.verdict %}
        <h4><span class="badge bg-warning text-dark">ğŸ’¾ {{ result.verdict }}</span></h4>
      {% else %}
        <h4><span class="badge bg-secondary">{{ result.verdict }}</span></h4>
      {% endif %}

      <p class="mt-3">
        â± <b>Thá»i gian:</b> {{ result.exec_time }} giÃ¢y<br>
        ğŸ§® <b>Test qua:</b> {{ result.passed_tests }}/{{ result.total_tests }}
      </p>
    {% else %}
      <div class="alert alert-info">âš™ï¸ Há»‡ thá»‘ng chÆ°a cÃ³ káº¿t quáº£ cháº¥m nÃ o Ä‘á»ƒ hiá»ƒn thá»‹.</div>
    {% endif %}

    <div class="mt-3">
      <a href="{% url 'submission_create' problem.id %}" class="btn btn-primary">
        ğŸ” Ná»™p láº¡i
      </a>
      <a href="/problems/" class="btn btn-secondary ms-2">
        â¬…ï¸ Quay láº¡i danh sÃ¡ch bÃ i
      </a>
    </div>
  </div>

  <!-- ğŸ“œ Lá»‹ch sá»­ ná»™p bÃ i -->
  {% if submissions %}
    <div class="card p-4 shadow-sm">
      <h5 class="mb-3">ğŸ§¾ Lá»‹ch sá»­ ná»™p bÃ i cá»§a báº¡n</h5>
      <table class="table table-striped align-middle">
        <thead class="table-light">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Thá»i gian</th>
            <th scope="col">NgÃ´n ngá»¯</th>
            <th scope="col">Káº¿t quáº£</th>
            <th scope="col">Thá»i gian cháº¡y</th>
            <th scope="col">Test qua</th>
          </tr>
        </thead>
        <tbody>
          {% for s in submissions %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ s.created_at|date:"H:i:s d/m/Y" }}</td>
            <td><span class="badge bg-info text-dark">{{ s.language|upper }}</span></td>
            <td>
              {% if s.verdict == "Accepted" %}
                <span class="badge bg-success">âœ… {{ s.verdict }}</span>
              {% elif "Wrong" in s.verdict %}
                <span class="badge bg-danger">âŒ {{ s.verdict }}</span>
              {% elif "Time" in s.verdict %}
                <span class="badge bg-warning text-dark">â° {{ s.verdict }}</span>
              {% elif "Memory" in s.verdict %}
                <span class="badge bg-warning text-dark">ğŸ’¾ {{ s.verdict }}</span>
              {% else %}
                <span class="badge bg-secondary">{{ s.verdict }}</span>
              {% endif %}
            </td>
            <td>{{ s.exec_time }}s</td>
            <td>{{ s.passed_tests }}/{{ s.total_tests }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="6" class="text-center">âš ï¸ Báº¡n chÆ°a ná»™p bÃ i nÃ o cho bÃ i toÃ¡n nÃ y.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}
</div>
{% endblock %}
