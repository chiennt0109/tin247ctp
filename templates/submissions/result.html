<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>K·∫øt qu·∫£ ch·∫•m b√†i</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <style>
    body { background-color: #f8f9fa; padding: 40px; }
    .verdict-accepted { color: green; font-weight: bold; }
    .verdict-wrong { color: red; font-weight: bold; }
    pre { background-color: #272822; color: #f8f8f2; padding: 12px; border-radius: 6px; font-size: 14px; }
    .testcase-pass { color: green; }
    .testcase-fail { color: red; }
  </style>
</head>

<body>
<div class="container">

  {% if result %}
  <div class="card p-4 shadow-sm mb-4">
    <h3 class="mb-3">üß© K·∫øt qu·∫£ ch·∫•m b√†i</h3>
    <p><strong>B√†i:</strong> {{ problem.title }}</p>
    <p><strong>Ng√¥n ng·ªØ:</strong> {{ result.language|upper }}</p>
    <p><strong>K·∫øt qu·∫£ chung:</strong>
      {% if result.verdict == "Accepted" %}
        <span class="verdict-accepted">‚úÖ {{ result.verdict }}</span>
      {% else %}
        <span class="verdict-wrong">‚ùå {{ result.verdict }}</span>
      {% endif %}
    </p>
    <p><strong>T·ªïng th·ªùi gian:</strong> {{ result.exec_time|floatformat:2 }}s</p>

    {% if passed is not None %}
    <div class="alert alert-info">
      üßÆ T·ªïng k·∫øt: <strong>{{ passed }}</strong> test ƒë√∫ng / <strong>{{ failed }}</strong> test sai.
    </div>
    {% endif %}
  </div>

  <!-- K·∫øt qu·∫£ t·ª´ng test case -->
  {% if result.test_details %}
  <div class="card shadow-sm p-4 mb-4">
    <h5>üìä Chi ti·∫øt c√°c test case</h5>
    <table class="table mt-3">
      <thead>
        <tr>
          <th>#</th>
          <th>K·∫øt qu·∫£</th>
          <th>Th·ªùi gian</th>
          <th>ƒê·∫ßu ra ch∆∞∆°ng tr√¨nh</th>
        </tr>
      </thead>
      <tbody>
        {% for tc in result.test_details %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>
              {% if tc.ok %}
                <span class="testcase-pass">‚úÖ ƒê√∫ng</span>
              {% else %}
                <span class="testcase-fail">‚ùå Sai</span>
              {% endif %}
            </td>
            <td>{{ tc.time|floatformat:2 }}s</td>
            <td><pre>{{ tc.output|truncatechars:200 }}</pre></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}

  <!-- Hi·ªÉn th·ªã m√£ ngu·ªìn -->
  <div class="card shadow-sm p-4">
    <h5>üß† M√£ ngu·ªìn ƒë√£ n·ªôp</h5>
    <pre>{{ result.source_code }}</pre>
  </div>

  <div class="mt-3">
    <a href="/problems/" class="btn btn-secondary">‚¨ÖÔ∏è Quay l·∫°i danh s√°ch b√†i</a>
    <a href="/submissions/mine/" class="btn btn-primary ms-2">üìú Xem l·ªãch s·ª≠ n·ªôp b√†i</a>
  </div>

  {% elif subs %}
  <div class="card shadow-sm p-4">
    <h3>üìú L·ªãch s·ª≠ n·ªôp b√†i c·ªßa b·∫°n</h3>
    <table class="table mt-3 table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>B√†i</th>
          <th>Ng√¥n ng·ªØ</th>
          <th>K·∫øt qu·∫£</th>
          <th>Th·ªùi gian</th>
          <th>Ng√†y</th>
        </tr>
      </thead>
      <tbody>
      {% for s in subs %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ s.problem.title }}</td>
          <td>{{ s.language|upper }}</td>
          <td>
            {% if s.verdict == "Accepted" %}
              <span class="verdict-accepted">‚úÖ Accepted</span>
            {% else %}
              <span class="verdict-wrong">{{ s.verdict }}</span>
            {% endif %}
          </td>
          <td>{{ s.exec_time|floatformat:2 }}s</td>
          <td>{{ s.created_at|date:"H:i d/m/Y" }}</td>
        </tr>
      {% empty %}
        <tr><td colspan="6" class="text-center">Ch∆∞a c√≥ b√†i n·ªôp n√†o.</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  {% else %}
  <div class="alert alert-info text-center">Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ hi·ªÉn th·ªã.</div>
  {% endif %}

</div>
</body>
</html>
