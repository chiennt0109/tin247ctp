<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>K·∫øt qu·∫£ n·ªôp b√†i - {{ problem.title }}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <style>
    body { background: #f8f9fa; padding: 40px; }
    .card { box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-radius: 10px; }
    .badge { font-size: 1rem; }
    .verdict-accepted { background-color: #28a745; }
    .verdict-wrong { background-color: #dc3545; }
    .verdict-time { background-color: #ffc107; color: #000; }
    .verdict-error { background-color: #6c757d; }
  </style>
</head>

<body>
<div class="container">
  <div class="card p-4">
    <h2 class="mb-4">üìä K·∫øt qu·∫£ n·ªôp b√†i: {{ problem.title }}</h2>

    {% if result %}
      <p><strong>Ng√¥n ng·ªØ:</strong> {{ result.language|upper }}</p>
      <p><strong>Th·ªùi gian ch·∫°y t·ªïng:</strong> {{ result.exec_time|floatformat:2 }} gi√¢y</p>

      {% if result.passed_tests is not None %}
        <p><strong>K·∫øt qu·∫£ chi ti·∫øt:</strong> {{ result.passed_tests }}/{{ result.total_tests }} test ƒë√∫ng</p>
      {% endif %}

      {% if result.verdict == "Accepted" %}
        <h4><span class="badge verdict-accepted">‚úîÔ∏è Accepted</span></h4>
      {% elif "Wrong" in result.verdict %}
        <h4><span class="badge verdict-wrong">‚ùå {{ result.verdict }}</span></h4>
      {% elif "Time" in result.verdict %}
        <h4><span class="badge verdict-time">‚è∞ {{ result.verdict }}</span></h4>
      {% else %}
        <h4><span class="badge verdict-error">{{ result.verdict }}</span></h4>
      {% endif %}
    {% else %}
      <div class="alert alert-info">Kh√¥ng c√≥ k·∫øt qu·∫£ ƒë·ªÉ hi·ªÉn th·ªã.</div>
    {% endif %}

    <div class="mt-4">
      <a href="{% url 'submit' problem.id %}" class="btn btn-primary">üîÅ N·ªôp l·∫°i</a>
      <a href="/problems/" class="btn btn-secondary ms-2">‚¨ÖÔ∏è Quay l·∫°i danh s√°ch b√†i</a>
    </div>
  </div>

  {% if submissions %}
    <div class="card p-3 mt-4">
      <h5>L·ªãch s·ª≠ n·ªôp b√†i g·∫ßn ƒë√¢y</h5>
      <table class="table table-striped mt-2">
        <thead>
          <tr>
            <th>Th·ªùi gian</th>
            <th>Ng√¥n ng·ªØ</th>
            <th>K·∫øt qu·∫£</th>
            <th>Th·ªùi gian ch·∫°y</th>
          </tr>
        </thead>
        <tbody>
        {% for sub in submissions %}
          <tr>
            <td>{{ sub.created_at|date:"H:i:s d/m/Y" }}</td>
            <td>{{ sub.language|upper }}</td>
            <td>
              {% if sub.verdict == "Accepted" %}
                <span class="badge verdict-accepted">‚úîÔ∏è Accepted</span>
              {% elif "Wrong" in sub.verdict %}
                <span class="badge verdict-wrong">‚ùå {{ sub.verdict }}</span>
              {% elif "Time" in sub.verdict %}
                <span class="badge verdict-time">‚è∞ {{ sub.verdict }}</span>
              {% else %}
                <span class="badge verdict-error">{{ sub.verdict }}</span>
              {% endif %}
            </td>
            <td>{{ sub.exec_time|floatformat:2 }}s</td>
          </tr>
        {% empty %}
          <tr><td colspan="4" class="text-center text-muted">Ch∆∞a c√≥ l·∫ßn n·ªôp n√†o.</td></tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}
</div>
</body>
</html>
