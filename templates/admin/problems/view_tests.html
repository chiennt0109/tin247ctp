{% extends "admin/base_site.html" %}
{% block content %}
<h2>ğŸ“„ {{ problem.code }} â€“ {{ problem.title }}</h2>
<p><b>Tá»•ng sá»‘ test:</b> {{ testcases|length }}</p>
<hr>
<table class="table">
  <thead>
    <tr><th>#</th><th>Input</th><th>Output</th><th>XÃ³a</th></tr>
  </thead>
  <tbody>
    {% for t in testcases %}
    <tr id="test-{{t.id}}">
      <td>{{ forloop.counter }}</td>
      <td><pre style="white-space:pre-wrap;max-height:200px;overflow:auto;">{{ t.input_data|truncatechars:400 }}</pre></td>
      <td><pre style="white-space:pre-wrap;max-height:200px;overflow:auto;">{{ t.expected_output|truncatechars:400 }}</pre></td>
      <td><button onclick="deleteTest({{t.id}})" class="btn btn-danger btn-sm">ğŸ—‘</button></td>
    </tr>
    {% empty %}
    <tr><td colspan="4" class="text-center text-muted">âš ï¸ ChÆ°a cÃ³ test case nÃ o</td></tr>
    {% endfor %}
  </tbody>
</table>
<script>
async function deleteTest(id){
  if(!confirm("Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a test #" + id + " ?")) return;
  const res = await fetch(`/admin/problems/problem/${id}/delete_test/`, {method:'POST'});
  if(res.ok){
    document.getElementById("test-" + id)?.remove();
  }else{
    alert("âŒ KhÃ´ng xÃ³a Ä‘Æ°á»£c test!");
  }
}
</script>
{% endblock %}
