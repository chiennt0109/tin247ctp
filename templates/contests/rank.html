{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h2 class="fw-bold mb-4">ğŸ Báº£ng xáº¿p háº¡ng â€” {{ contest.name }}</h2>

  {% if not rankings %}
    <div class="alert alert-info text-center rounded-3 shadow-sm">
      ğŸ˜… ChÆ°a cÃ³ ai ná»™p bÃ i trong contest nÃ y.
    </div>
  {% else %}
  <div class="table-responsive">
    <table class="table table-striped align-middle shadow-sm rounded-3">
      <thead class="table-primary">
        <tr>
          <th class="text-center">#</th>
          <th>NgÆ°á»i tham gia</th>
          <th class="text-center">AC/Tá»•ng</th>
          <th class="text-center">Äiá»ƒm</th>
          <th class="text-center">Penalty</th>
          <th class="text-center">Láº§n ná»™p cuá»‘i</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rankings %}
        <tr class="{% if forloop.counter <= 3 %}table-warning{% endif %}">
          <td class="text-center fw-bold" style="font-size:18px;">
            {% if forloop.counter == 1 %}
              ğŸ¥‡
            {% elif forloop.counter == 2 %}
              ğŸ¥ˆ
            {% elif forloop.counter == 3 %}
              ğŸ¥‰
            {% else %}
              {{ forloop.counter }}
            {% endif %}
          </td>
          <td class="fw-semibold">{{ r.user.username }}</td>
          <td class="text-center text-success fw-semibold">
            {{ r.ac_count }}/{{ total_problems }}
          </td>
          <td class="text-center fw-bold">{{ r.score }}</td>
          <td class="text-center text-muted">{{ r.penalty }}</td>
          <td class="text-center">{{ r.last_submit|date:"d/m/Y H:i" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}

  <div class="text-center mt-4">
    <a href="{% url 'contest_detail' contest.id %}" class="btn btn-outline-secondary rounded-pill me-2">
      â¬… Quay láº¡i contest
    </a>
    <a href="{% url 'problems:problem_list' %}" class="btn btn-outline-primary rounded-pill">
      ğŸ” Xem danh sÃ¡ch bÃ i táº­p
    </a>
  </div>
</div>

<style>
.table th, .table td {
  vertical-align: middle;
}
.table-warning td {
  background-color: rgba(255, 239, 170, 0.3) !important;
}
</style>
{% endblock %}
