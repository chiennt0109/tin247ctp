{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <!-- ThÃ´ng tin tá»•ng quan -->
  <div class="card border-0 shadow-sm rounded-4 mb-4">
    <div class="card-body d-flex flex-wrap align-items-center justify-content-between">
      <div>
        <h3 class="fw-bold mb-1 text-primary">{{ contest.name }}</h3>
        <p class="text-muted mb-1">
          ğŸ•’ <b>Báº¯t Ä‘áº§u:</b> {{ contest.start_time|date:"d/m/Y H:i" }}<br>
          â³ <b>Káº¿t thÃºc:</b> {{ contest.end_time|date:"d/m/Y H:i" }}
        </p>
      </div>
      <div class="text-end">
        <span class="badge bg-light text-dark px-3 py-2 fs-6 shadow-sm">
          ğŸ“˜ Tá»•ng bÃ i: <b>{{ total_problems }}</b>
        </span>
        <span class="badge bg-light text-dark px-3 py-2 fs-6 shadow-sm ms-2">
          ğŸ‘¥ ThÃ­ sinh: <b>{{ rankings|length }}</b>
        </span>
      </div>
    </div>
  </div>

  <!-- Báº£ng xáº¿p háº¡ng -->
  <div class="card border-0 shadow rounded-4">
    <div class="card-header bg-gradient fw-semibold text-white"
         style="background:linear-gradient(90deg,#2563eb,#1d4ed8);">
      ğŸ… Báº£ng xáº¿p háº¡ng cuá»™c thi
    </div>
    <div class="table-responsive">
      <table class="table align-middle mb-0 table-hover text-center">
        <thead class="table-light">
          <tr>
            <th style="width:80px;">Háº¡ng</th>
            <th>NgÆ°á»i dÃ¹ng</th>
            <th>Äiá»ƒm</th>
            <th>Pháº¡t</th>
            <th>Thá»i gian ná»™p cuá»‘i</th>
          </tr>
        </thead>
        <tbody>
          {% for part in rankings %}
          {% if forloop.counter == 1 %}
          <tr class="table-warning fw-bold">
            <td>ğŸ¥‡ {{ forloop.counter }}</td>
          {% elif forloop.counter == 2 %}
          <tr class="table-secondary fw-bold">
            <td>ğŸ¥ˆ {{ forloop.counter }}</td>
          {% elif forloop.counter == 3 %}
          <tr class="table-danger fw-bold">
            <td>ğŸ¥‰ {{ forloop.counter }}</td>
          {% else %}
          <tr>
            <td>{{ forloop.counter }}</td>
          {% endif %}
            <td class="text-start ps-4">
              <i class="bi bi-person-circle text-primary me-2"></i>{{ part.user.username }}
            </td>
            <td class="fw-semibold text-success">{{ part.score }}</td>
            <td class="text-danger">{{ part.penalty }}</td>
            <td class="text-muted">{{ part.last_submit|date:"d/m/Y H:i" }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="5" class="py-4 text-muted">â— ChÆ°a cÃ³ ai ná»™p bÃ i trong cuá»™c thi nÃ y.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Äiá»u hÆ°á»›ng -->
  <div class="d-flex justify-content-between align-items-center mt-4">
    <a href="{% url 'contests:contest_detail' contest.id %}" class="btn btn-outline-secondary rounded-pill px-4">
      â† Quay láº¡i contest
    </a>
    <div>
      <a href="{% url 'problems:problem_list' %}" class="btn btn-outline-primary rounded-pill px-4 me-2">
        ğŸ” Danh sÃ¡ch bÃ i táº­p
      </a>
      <a href="{% url 'contests:contest_list' %}" class="btn btn-outline-dark rounded-pill px-4">
        ğŸ† Táº¥t cáº£ contest
      </a>
    </div>
  </div>
</div>

<!-- CSS phá»¥ -->
<style>
.table-hover tbody tr:hover { background-color: #f8fafc !important; transition: 0.2s; }
.table-warning, .table-secondary, .table-danger { font-size: 1.02rem; }
.badge { font-size: 0.95rem; }
.card-header { letter-spacing: 0.3px; }
</style>
{% endblock %}
