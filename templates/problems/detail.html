{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm p-4 mb-4">
    <h2 class="mb-3">{{ problem.title }}</h2>
    <p><strong>Mã bài:</strong> {{ problem.code }}</p>
    <p><strong>Độ khó:</strong> {{ problem.difficulty }}</p>
    <p><strong>Giới hạn:</strong> {{ problem.time_limit }}s · {{ problem.memory_limit }}MB</p>

    <!-- ✅ Phần đề bài -->
    <hr>
    <div class="problem-statement" style="margin-top:10px; line-height:1.7;">
      {{ problem.statement|safe }}
    </div>

    <!-- ✅ Nút nộp bài -->
    <div class="text-center mt-4 mb-2">
      <a href="{% url 'submission_create' problem.id %}" class="btn btn-success btn-lg">
        🚀 Nộp bài
      </a>
    </div>
  </div>

  <!-- ✅ Ví dụ mẫu -->
  {% if problem.sample_input or problem.sample_output %}
  <div class="card shadow-sm p-3 mb-4">
    <h4>🧪 Ví dụ mẫu</h4>
    <div class="row">
      <div class="col-md-6">
        <h6>📥 Input:</h6>
        <pre class="bg-light p-2 rounded">{{ problem.sample_input }}</pre>
      </div>
      <div class="col-md-6">
        <h6>📤 Output:</h6>
        <pre class="bg-light p-2 rounded">{{ problem.sample_output }}</pre>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- ✅ Gợi ý AI (tùy chọn, không gây lỗi nếu chưa bật) -->
  <div class="card shadow-sm p-3">
    <h5>🧠 Trợ lý học tập</h5>
    <p class="text-muted small mb-2">
      Công cụ AI giúp bạn hiểu và tiếp cận bài toán dễ hơn.
    </p>
    <a href="#" class="btn btn-outline-primary btn-sm disabled">💡 Gợi ý (đang phát triển)</a>
  </div>
</div>

<!-- ✅ KaTeX render cho công thức toán -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
      ]
    });
  });
</script>
{% endblock %}
