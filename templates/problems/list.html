{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h2>üß© Danh s√°ch b√†i to√°n</h2>

  <!-- B·ªô l·ªçc -->
  <form method="get" class="mb-3">
    <div style="display:flex;gap:10px;flex-wrap:wrap;">
      <select name="tag">
        <option value="">-- Ch·ªçn tag --</option>
        {% for tag in tags %}
          <option value="{{ tag.slug }}" {% if tag.slug == selected_tag %}selected{% endif %}>{{ tag.name }}</option>
        {% endfor %}
      </select>

      <select name="difficulty">
        <option value="">-- ƒê·ªô kh√≥ --</option>
        {% for level in difficulty_levels %}
          <option value="{{ level }}" {% if selected_difficulty == level %}selected{% endif %}>{{ level }}</option>
        {% endfor %}
      </select>

      <button type="submit">L·ªçc</button>
      <a href="{% url 'problem_list' %}">üßπ Reset</a>
    </div>
  </form>

  <!-- B·∫£ng b√†i to√°n -->
  <table border="1" cellspacing="0" cellpadding="8" width="100%">
    <thead>
      <tr>
        <th>M√£</th>
        <th>Ti√™u ƒë·ªÅ</th>
        <th>ƒê·ªô kh√≥</th>
        <th>Tag</th>
        <th>T·ªâ l·ªá AC (%)</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for p in problems %}
      <tr>
        <td>{{ p.code }}</td>
        <td>{{ p.title }}</td>
        <td>
          {% if p.difficulty == "Easy" %}<span style="color:green">‚óè</span>{% endif %}
          {% if p.difficulty == "Medium" %}<span style="color:orange">‚óè</span>{% endif %}
          {% if p.difficulty == "Hard" %}<span style="color:red">‚óè</span>{% endif %}
          {{ p.difficulty }}
        </td>
        <td>
          {% for t in p.tags.all %}
            <span style="background:#eee;padding:3px 8px;border-radius:6px;">{{ t.name }}</span>
          {% empty %}‚Äî{% endfor %}
        </td>
        <td>{{ p.success_rate }}</td>
        <td><a href="{% url 'problem_detail' p.id %}">üìñ Xem chi ti·∫øt</a></td>
      </tr>
      {% empty %}
      <tr><td colspan="6">Kh√¥ng c√≥ b√†i to√°n n√†o</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
