{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="problems-container">
    <h2 class="page-title">üìò Problem Bank</h2>

    <table class="problem-table">
        <thead>
            <tr>
                <th>Code</th>
                <th>Problem</th>
                <th>Difficulty</th>
                <th>Progress</th>
            </tr>
        </thead>
        <tbody>
            {% for problem in page_obj %}
            <tr>
                <td class="code-column">{{ problem.code }}</td>

                <!-- gi·ªØ th·∫ª <a> cho t√™n b√†i -->
                <td>
                    <a class="problem-link" href="{% url 'problem_detail' problem.id %}">
                        {{ problem.title }}
                    </a>
                </td>

                <td>
                    <span class="badge badge-{{ problem.difficulty|lower }}">
                        {{ problem.difficulty }}
                    </span>
                </td>

                <td>
                    {% if problem.submission_count > 0 %}
                        ‚úÖ {{ problem.ac_count }}/{{ problem.submission_count }}
                    {% else %}
                        ‚è≥ No submissions yet
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="4">No problems found.</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- ‚úÖ Pagination -->
    <div class="pagination">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">&laquo; Prev</a>
        {% endif %}

        <span>Page {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Next &raquo;</a>
        {% endif %}
    </div>
</div>

<style>
.problems-container { max-width: 900px; margin: auto; font-family: Inter, sans-serif; }
.page-title { font-size: 26px; margin-bottom: 18px; font-weight: 600; }

.problem-table { width: 100%; border-collapse: collapse; font-size: 15px; }
.problem-table th { background:#f7faff; font-weight:600; padding:10px; }
.problem-table td { padding:10px; border-top:1px solid #eee; }
.problem-link { color:#2563eb; font-weight:500; text-decoration:none; }
.problem-link:hover { text-decoration:underline; }

.code-column { font-family: monospace; }

.badge { padding:4px 8px; border-radius:6px; font-size:13px; color:white; }
.badge-easy { background:#16a34a; }
.badge-medium { background:#f59e0b; }
.badge-hard { background:#dc2626; }

.pagination { margin-top:18px; text-align:center; }
.pagination a { margin:0 8px; padding:6px 10px; background:#2563eb; color:white; border-radius:5px; text-decoration:none; }
.pagination span { margin:0 10px; }
</style>

{% endblock %}
